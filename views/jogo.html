<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ stats['nome'] }} - Dia {{ stats['dia'] }}</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header class="game-header">
            <div class="header-info">
                <h1>ğŸ›ï¸ {{ stats['nome'] }}</h1>
                <p class="dia">ğŸ“… Dia {{ stats['dia'] }}</p>
            </div>
            <div class="header-actions">
                <form action="/proximo_turno" method="POST" style="display: inline;">
                    <button type="submit" class="btn btn-primary">â­ï¸ PrÃ³ximo Turno</button>
                </form>
                <form action="/reiniciar" method="POST" style="display: inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Deseja realmente reiniciar?')">ğŸ”„ Reiniciar</button>
                </form>
            </div>
        </header>

        % if condicoes['status'] != 'jogando':
        <div class="alert alert-{{ 'success' if condicoes['status'] == 'vitoria' else 'error' }}">
            <h2>{{ 'ğŸ‰ VITÃ“RIA!' if condicoes['status'] == 'vitoria' else 'ğŸ’€ DERROTA!' }}</h2>
            <p>{{ condicoes['mensagem'] }}</p>
        </div>
        % end

        <div class="game-grid">
            <!-- Painel de Recursos -->
            <section class="panel recursos-panel">
                <h2>ğŸ“¦ Recursos</h2>
                <div class="recursos-grid">
                    % for nome, recurso in stats['recursos'].items():
                    <div class="recurso-card">
                        <div class="recurso-icon">
                            % if nome == 'comida':
                            ğŸŒ¾
                            % elif nome == 'agua':
                            ğŸ’§
                            % elif nome == 'energia':
                            âš¡
                            % elif nome == 'metal':
                            ğŸ”©
                            % end
                        </div>
                        <div class="recurso-info">
                            <h3>{{ nome.capitalize() }}</h3>
                            <p class="quantidade">{{ recurso['quantidade'] }} / {{ recurso['capacidade_maxima'] }}</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {{ recurso['percentual'] }}%; background-color: {{ '#e74c3c' if recurso['percentual'] < 20 else '#f39c12' if recurso['percentual'] < 50 else '#27ae60' }}"></div>
                            </div>
                        </div>
                    </div>
                    % end
                </div>
            </section>

            <!-- Painel de EstatÃ­sticas -->
            <section class="panel stats-panel">
                <h2>ğŸ“Š EstatÃ­sticas da ColÃ´nia</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">ğŸ‘¥ Colonos Vivos:</span>
                        <span class="stat-value">{{ stats['colonos_vivos'] }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ğŸ’€ Colonos Mortos:</span>
                        <span class="stat-value">{{ stats['colonos_mortos'] }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">â¤ï¸ SaÃºde MÃ©dia:</span>
                        <span class="stat-value">{{ stats['saude_media'] }}%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ğŸ˜Š Felicidade MÃ©dia:</span>
                        <span class="stat-value">{{ stats['felicidade_media'] }}%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ğŸ—ï¸ EdifÃ­cios:</span>
                        <span class="stat-value">{{ stats['total_edificios'] }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ğŸ  Capacidade HabitaÃ§Ã£o:</span>
                        <span class="stat-value">{{ stats['capacidade_habitacao'] }}</span>
                    </div>
                </div>
            </section>

            <!-- Painel de ConstruÃ§Ã£o -->
            <section class="panel construcao-panel">
                <h2>ğŸ—ï¸ Construir EdifÃ­cios</h2>
                <div class="edificios-grid">
                    <div class="edificio-card">
                        <h3>ğŸŒ¾ Fazenda</h3>
                        <p>Produz comida</p>
                        <p class="custo">ğŸ’° Metal: 20, Energia: 10</p>
                        <form action="/construir/fazenda" method="POST">
                            <button type="submit" class="btn btn-build">Construir</button>
                        </form>
                    </div>
                    <div class="edificio-card">
                        <h3>ğŸ’§ Purificador</h3>
                        <p>Produz Ã¡gua</p>
                        <p class="custo">ğŸ’° Metal: 25, Energia: 15</p>
                        <form action="/construir/purificador" method="POST">
                            <button type="submit" class="btn btn-build">Construir</button>
                        </form>
                    </div>
                    <div class="edificio-card">
                        <h3>âš¡ Gerador</h3>
                        <p>Produz energia</p>
                        <p class="custo">ğŸ’° Metal: 40</p>
                        <form action="/construir/gerador" method="POST">
                            <button type="submit" class="btn btn-build">Construir</button>
                        </form>
                    </div>
                    <div class="edificio-card">
                        <h3>ğŸ”© Mina</h3>
                        <p>Extrai metal</p>
                        <p class="custo">ğŸ’° Metal: 15, Energia: 5</p>
                        <form action="/construir/mina" method="POST">
                            <button type="submit" class="btn btn-build">Construir</button>
                        </form>
                    </div>
                    <div class="edificio-card">
                        <h3>ğŸ  HabitaÃ§Ã£o</h3>
                        <p>Abriga colonos</p>
                        <p class="custo">ğŸ’° Metal: 30, Energia: 5</p>
                        <form action="/construir/habitacao" method="POST">
                            <button type="submit" class="btn btn-build">Construir</button>
                        </form>
                    </div>
                    <div class="edificio-card">
                        <h3>ğŸ¥ Hospital</h3>
                        <p>Cuida da saÃºde</p>
                        <p class="custo">ğŸ’° Metal: 35, Energia: 10</p>
                        <form action="/construir/hospital" method="POST">
                            <button type="submit" class="btn btn-build">Construir</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Painel de Colonos -->
            <section class="panel colonos-panel">
                <h2>ğŸ‘¥ Colonos ({{ stats['colonos_vivos'] }})</h2>
                <div class="acoes-colonos">
                    <form action="/contratar_colono" method="POST">
                        <button type="submit" class="btn btn-secondary">â• Contratar Novo Colono</button>
                    </form>
                </div>
                <div class="colonos-lista">
                    % for colono in stats['colonos'][:10]:
                    <div class="colono-card">
                        <h4>{{ colono['nome'] }}</h4>
                        <p class="profissao">{{ colono['profissao'] }}</p>
                        <div class="colono-stats">
                            <div class="colono-stat">
                                <span>â¤ï¸ SaÃºde:</span>
                                <div class="mini-progress">
                                    <div class="mini-fill" style="width: {{ colono['saude'] }}%; background-color: {{ '#e74c3c' if colono['saude'] < 30 else '#f39c12' if colono['saude'] < 60 else '#27ae60' }}"></div>
                                </div>
                                <span>{{ colono['saude'] }}%</span>
                            </div>
                            <div class="colono-stat">
                                <span>ğŸ˜Š Felicidade:</span>
                                <div class="mini-progress">
                                    <div class="mini-fill" style="width: {{ colono['felicidade'] }}%; background-color: {{ '#e74c3c' if colono['felicidade'] < 30 else '#f39c12' if colono['felicidade'] < 60 else '#27ae60' }}"></div>
                                </div>
                                <span>{{ colono['felicidade'] }}%</span>
                            </div>
                        </div>
                    </div>
                    % end
                    % if len(stats['colonos']) > 10:
                    <p class="mais-colonos">... e mais {{ len(stats['colonos']) - 10 }} colonos</p>
                    % end
                </div>
            </section>

            <!-- Painel de EdifÃ­cios -->
            <section class="panel edificios-panel">
                <h2>ğŸ›ï¸ EdifÃ­cios ConstruÃ­dos ({{ stats['total_edificios'] }})</h2>
                <div class="edificios-lista">
                    % for edificio in stats['edificios']:
                    <div class="edificio-item">
                        <h4>{{ edificio['nome'] }} (NÃ­vel {{ edificio['nivel'] }})</h4>
                        <p>Status: {{ 'âœ… Ativo' if edificio['status'] == 'ativo' else 'âš ï¸ Inativo' }}</p>
                        <p class="producao-total">ProduÃ§Ã£o Total: {{ edificio['producao_total'] }}</p>
                    </div>
                    % end
                </div>
            </section>

            <!-- Painel de Eventos -->
            % if stats['eventos_recentes']:
            <section class="panel eventos-panel">
                <h2>ğŸ“° Eventos Recentes</h2>
                <div class="eventos-lista">
                    % for evento in reversed(stats['eventos_recentes']):
                    <div class="evento-item">
                        <h4>{{ evento['nome'] }}</h4>
                        <p>{{ evento['descricao'] }}</p>
                    </div>
                    % end
                </div>
            </section>
            % end
        </div>

        <footer class="footer">
            <p>Projeto de OrientaÃ§Ã£o a Objetos - UnB | PadrÃ£o MVC | PersistÃªncia com Pickle</p>
        </footer>
    </div>
</body>
</html>

