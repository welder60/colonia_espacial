<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logs do Sistema - Colony Game</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .logs-container {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 600px;
            overflow-y: auto;
            margin: 20px 0;
        }
        
        .log-line {
            padding: 5px;
            border-bottom: 1px solid #333;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .log-line:hover {
            background: #2d2d2d;
        }
        
        .log-DEBUG { color: #808080; }
        .log-INFO { color: #4ec9b0; }
        .log-WARNING { color: #dcdcaa; }
        .log-ERROR { color: #f48771; }
        .log-CRITICAL { color: #f44747; font-weight: bold; }
        
        .logs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .logs-section {
            margin-bottom: 30px;
        }
        
        .refresh-btn {
            background: #007acc;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
        }
        
        .refresh-btn:hover {
            background: #005a9e;
        }
        
        .empty-logs {
            text-align: center;
            color: #808080;
            padding: 40px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                <div>
                    <h1>üìä Logs do Sistema</h1>
                    <p class="subtitle">Monitoramento e Debugging</p>
                </div>
                <div class="user-info">
                    <span>üë§ {{ usuario['nome_completo'] }}</span>
                    <form action="/menu" method="GET" style="display: inline; margin-left: 10px;">
                        <button type="submit" class="btn btn-secondary">üè† Menu</button>
                    </form>
                    <form action="/logout" method="GET" style="display: inline;">
                        <button type="submit" class="btn-logout">üö™ Sair</button>
                    </form>
                </div>
            </div>
        </header>

        <div class="main-menu">
            <!-- Se√ß√£o de Erros -->
            <div class="logs-section">
                <div class="menu-card">
                    <div class="logs-header">
                        <h2>üî¥ Logs de Erro (√öltimos 50)</h2>
                        <button onclick="location.reload()" class="refresh-btn">üîÑ Atualizar</button>
                    </div>
                    
                    <div class="logs-container">
                        % if erros and len(erros) > 0:
                            % for linha in erros:
                            <div class="log-line log-ERROR">{{ linha.strip() }}</div>
                            % end
                        % else:
                        <div class="empty-logs">‚úÖ Nenhum erro registrado</div>
                        % end
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o de Logs Gerais -->
            <div class="logs-section">
                <div class="menu-card">
                    <div class="logs-header">
                        <h2>üìã Logs Gerais (√öltimos 100)</h2>
                        <button onclick="location.reload()" class="refresh-btn">üîÑ Atualizar</button>
                    </div>
                    
                    <div class="logs-container">
                        % if logs and len(logs) > 0:
                            % for linha in logs:
                                % if 'DEBUG' in linha:
                                <div class="log-line log-DEBUG">{{ linha.strip() }}</div>
                                % elif 'INFO' in linha:
                                <div class="log-line log-INFO">{{ linha.strip() }}</div>
                                % elif 'WARNING' in linha:
                                <div class="log-line log-WARNING">{{ linha.strip() }}</div>
                                % elif 'ERROR' in linha:
                                <div class="log-line log-ERROR">{{ linha.strip() }}</div>
                                % elif 'CRITICAL' in linha:
                                <div class="log-line log-CRITICAL">{{ linha.strip() }}</div>
                                % else:
                                <div class="log-line">{{ linha.strip() }}</div>
                                % end
                            % end
                        % else:
                        <div class="empty-logs">‚ÑπÔ∏è Nenhum log dispon√≠vel</div>
                        % end
                    </div>
                </div>
            </div>

            <!-- Informa√ß√µes -->
            <div class="info-card">
                <h3>‚ÑπÔ∏è Sobre os Logs</h3>
                <p><strong>N√≠veis de Log:</strong></p>
                <ul class="conceitos-lista">
                    <li><span style="color: #808080;">‚ö´</span> <strong>DEBUG:</strong> Informa√ß√µes detalhadas para debugging</li>
                    <li><span style="color: #4ec9b0;">üîµ</span> <strong>INFO:</strong> Informa√ß√µes gerais sobre opera√ß√µes</li>
                    <li><span style="color: #dcdcaa;">üü°</span> <strong>WARNING:</strong> Avisos de situa√ß√µes anormais</li>
                    <li><span style="color: #f48771;">üü†</span> <strong>ERROR:</strong> Erros que afetam funcionalidades</li>
                    <li><span style="color: #f44747;">üî¥</span> <strong>CRITICAL:</strong> Erros cr√≠ticos do sistema</li>
                </ul>
                
                <p style="margin-top: 20px;"><strong>Arquivos de Log:</strong></p>
                <ul class="conceitos-lista">
                    <li>üìÑ <code>logs/colony_game.log</code> - Todos os logs</li>
                    <li>üî¥ <code>logs/errors.log</code> - Apenas erros</li>
                    <li>üíæ Rota√ß√£o autom√°tica a cada 5MB</li>
                    <li>üì¶ Mant√©m at√© 5 backups</li>
                </ul>

                <p style="margin-top: 20px;"><strong>Eventos Registrados:</strong></p>
                <ul class="conceitos-lista">
                    <li>üîê Login e logout de usu√°rios</li>
                    <li>üéÆ Cria√ß√£o e carregamento de jogos</li>
                    <li>üèóÔ∏è Constru√ß√£o de edif√≠cios</li>
                    <li>üë• Contrata√ß√£o de colonos</li>
                    <li>‚è≠Ô∏è Processamento de turnos</li>
                    <li>üíæ Salvamento de dados</li>
                    <li>‚ùå Todos os erros e exce√ß√µes</li>
                </ul>
            </div>
        </div>

        <footer class="footer">
            <p>Sistema de Logging | Acesso restrito ao administrador</p>
        </footer>
    </div>
</body>
</html>

